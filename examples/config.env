# Example configuration for /etc/kiosk-retropie/config.env
#
# This file is sourced by bash. Quote values if they contain spaces or special characters.

## Required (kiosk)

# Full URL to open in Chromium when in kiosk mode.
KIOSK_URL=

## Optional (NFS)

# NFS is optional.
# If NFS is unreachable (or unset), the appliance continues running using local storage.
#
# You can set NFS in either of these forms:
#   - NFS_SERVER=nas                    # uses default export: /export/kiosk-retropie
#   - NFS_SERVER=nas:/export/kiosk-retropie
#
# The share root is expected to contain:
#   - roms/                   (used by ROM sync; missing roms/ is not fatal)
#   - backups/<hostname>/     (created on demand for save/state backups)
NFS_SERVER=

## Optional: display

# Rotation: normal | left | right | inverted
# KIOSK_SCREEN_ROTATION=normal

# Xorg virtual terminals (VTs) used by kiosk vs Retro mode.
# Linux exposes multiple text/graphics “virtual terminals” (numbered sessions). This project uses separate VTs so
# kiosk and Retro can cleanly take ownership of the display.
# KIOSK_X_VT=7
# RETROPIE_X_VT=8


## Optional: controller button codes (entry/exit)

# This project uses Linux evdev button codes. Different controllers can emit different codes.
# To discover codes on the Pi:
#   sudo kiosk-retropie-controller-codes.sh
#   # then press the buttons you want.

# Enter Retro (kiosk -> Retro)
# RETROPIE_ENTER_TRIGGER_CODE=315

# Exit Retro (Retro -> kiosk): press and hold these buttons together (order doesn't matter).
# Default combo is Start + A: 315,304
# RETROPIE_EXIT_SEQUENCE_CODES=315,304

# Timing knobs
# - RETROPIE_ACTION_DEBOUNCE_SEC: minimum seconds between *actions* (enter/exit; prevents double-triggers)
# - RETROPIE_COMBO_WINDOW_SEC: max seconds between first and last button press in the exit combo
# RETROPIE_ACTION_DEBOUNCE_SEC=1.0
# RETROPIE_COMBO_WINDOW_SEC=0.75

## Optional: ROM sync (pull from NFS -> local)

# ROMs are copied from <NFS mount>/roms on boot to local storage.
# Local paths are hardcoded by the project (testable via KIOSK_RETROPIE_ROOT).
#
# Optional knobs:
# RETROPIE_ROMS_SYNC_DELETE=1
# RETROPIE_ROMS_OWNER=retropi:retropi
# RETROPIE_ROMS_SYSTEMS=nes,snes,megadrive,psx

## Optional: periodic save/state backup (push local -> NFS; skips while in Retro mode)

# Backups are enabled by default (RETROPIE_SAVE_BACKUP_ENABLED defaults to 1).
# Set to 0 to disable:
# RETROPIE_SAVE_BACKUP_ENABLED=0

# Destination defaults to: <NFS mount>/backups/<hostname>/
# RETROPIE_SAVE_BACKUP_SUBDIR overrides only the <hostname> component:
# RETROPIE_SAVE_BACKUP_SUBDIR=kiosk-retropie

# Mirror deletions from local -> NFS
# RETROPIE_SAVE_BACKUP_DELETE=1

## Optional: MQTT bridges (LEDs and/or screen brightness)

# Broker settings (required if any MQTT bridge is enabled)
# MQTT_HOST=192.168.1.50
# MQTT_PORT=1883
# MQTT_USERNAME=
# MQTT_PASSWORD=
# MQTT_TLS=0

# Root topic prefix for all MQTT topics (use a unique prefix per device if you run multiple kiosks)
# KIOSK_MQTT_TOPIC_PREFIX=kiosk-retropie

# LED MQTT bridge
# Disabled by default (set to 1 to enable)
# KIOSK_LED_MQTT_ENABLED=1
# KIOSK_LED_MQTT_POLL_SEC=2

# Optional: LED sysfs names (defaults match Raspberry Pi OS)
# KIOSK_ACT_LED=ledact
# KIOSK_PWR_LED=ledpwr

# Screen brightness MQTT bridge
# KIOSK_SCREEN_BRIGHTNESS_MQTT_ENABLED=0
# KIOSK_SCREEN_BRIGHTNESS_MQTT_POLL_SEC=2

# Controls screen brightness by writing to:
#   /sys/class/backlight/<auto>/brightness
# Backlight selection is handled by the application.
